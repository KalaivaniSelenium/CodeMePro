name: Run Selenium Tests with TestNG

on:
  push:
    branches: [main]  # ğŸ”§ Change 'main' if your default branch is 'master' or something else
  pull_request:
    branches: [main]

jobs:
  test:
    runs-on: ubuntu-latest  # ğŸ–¥ï¸ OS for running your workflow (Ubuntu is fastest & free)

    steps:
    - name: Checkout code
      uses: actions/checkout@v3

    - name: Set up JDK 17
      uses: actions/setup-java@v3
      with:
        distribution: 'temurin'     # ğŸ”§ You can use 'zulu' or 'oracle' if needed
        java-version: '17'          # ğŸ”§ Change this if you're using Java 11 or Java 21 etc.

    - name: Cache Maven packages   # (Optional) speeds up builds
      uses: actions/cache@v3
      with:
        path: ~/.m2
        key: ${{ runner.os }}-maven-${{ hashFiles('**/pom.xml') }}
        restore-keys: |
          ${{ runner.os }}-maven-

    - name: Run Maven tests
      run: mvn clean test          # ğŸ”§ This assumes you run tests using `mvn test`
    
    - name: Archive test reports   # (Optional) uploads test-output folder as downloadable zip
      if: always()
      uses: actions/upload-artifact@v3
      with:
        name: testng-reports
        path: test-output/
